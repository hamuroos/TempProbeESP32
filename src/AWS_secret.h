#pragma once
#include <pgmspace.h>
#include <WiFiClientSecure.h>
#include <MQTTClient.h>
#include <ArduinoJson.h>
#include "WiFi.h"

// The MQTT topics that this device should publish/subscribe
#define AWS_IOT_PUBLISH_TOPIC   "MESKR/coretemp/temp"
#define AWS_IOT_SUBSCRIBE_TOPIC "MESKR/coretemp/temp"


#define AWS_IOT_PUBLISH_TOPIC_2   "MESKR/coretemp/po"
#define AWS_IOT_SUBSCRIBE_TOPIC_2 "MESKR/coretemp/po"


#define SECRET
#define THINGNAME "iot_meskr_fpp2_coretemp_temp_1"
#define THINGNAME2 "iot_meskr_fpp2_coretemp_po_1"

extern WiFiClientSecure net;
extern MQTTClient client;



const char AWS_IOT_ENDPOINT[] = "a2sb2uv8p0a7ir-ats.iot.ap-southeast-1.amazonaws.com";

// Amazon Root CA 1
static const char AWS_CERT_CA[] PROGMEM = R"EOF(
-----BEGIN CERTIFICATE-----
MIIDQTCCAimgAwIBAgITBmyfz5m/jAo54vB4ikPmljZbyjANBgkqhkiG9w0BAQsF
ADA5MQswCQYDVQQGEwJVUzEPMA0GA1UEChMGQW1hem9uMRkwFwYDVQQDExBBbWF6
b24gUm9vdCBDQSAxMB4XDTE1MDUyNjAwMDAwMFoXDTM4MDExNzAwMDAwMFowOTEL
MAkGA1UEBhMCVVMxDzANBgNVBAoTBkFtYXpvbjEZMBcGA1UEAxMQQW1hem9uIFJv
b3QgQ0EgMTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALJ4gHHKeNXj
ca9HgFB0fW7Y14h29Jlo91ghYPl0hAEvrAIthtOgQ3pOsqTQNroBvo3bSMgHFzZM
9O6II8c+6zf1tRn4SWiw3te5djgdYZ6k/oI2peVKVuRF4fn9tBb6dNqcmzU5L/qw
IFAGbHrQgLKm+a/sRxmPUDgH3KKHOVj4utWp+UhnMJbulHheb4mjUcAwhmahRWa6
VOujw5H5SNz/0egwLX0tdHA114gk957EWW67c4cX8jJGKLhD+rcdqsq08p8kDi1L
93FcXmn/6pUCyziKrlA4b9v7LWIbxcceVOF34GfID5yHI9Y/QCB/IIDEgEw+OyQm
jgSubJrIqg0CAwEAAaNCMEAwDwYDVR0TAQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMC
AYYwHQYDVR0OBBYEFIQYzIU07LwMlJQuCFmcx7IQTgoIMA0GCSqGSIb3DQEBCwUA
A4IBAQCY8jdaQZChGsV2USggNiMOruYou6r4lK5IpDB/G/wkjUu0yKGX9rbxenDI
U5PMCCjjmCXPI6T53iHTfIUJrU6adTrCC2qJeHZERxhlbI1Bjjt/msv0tadQ1wUs
N+gDS63pYaACbvXy8MWy7Vu33PqUXHeeE6V/Uq2V8viTO96LXFvKWlJbYK8U90vv
o/ufQJVtMVT8QtPHRh8jrdkPSHCa2XV4cdFyQzR1bldZwgJcJmApzyMZFo6IQ6XU
5MsI+yMRQ+hDKXJioaldXgjUkK642M4UwtBV8ob2xJNDd2ZhwLnoQdeXeGADbkpy
rqXRfboQnoZsG4q5WTP468SQvvG5
-----END CERTIFICATE-----
)EOF";

// Device Certificate
static const char AWS_CERT_CRT[] PROGMEM = R"KEY(
-----BEGIN CERTIFICATE-----
MIIDWTCCAkGgAwIBAgIUA4o8UIeeR4LhASyLQxm6+tighsMwDQYJKoZIhvcNAQEL
BQAwTTFLMEkGA1UECwxCQW1hem9uIFdlYiBTZXJ2aWNlcyBPPUFtYXpvbi5jb20g
SW5jLiBMPVNlYXR0bGUgU1Q9V2FzaGluZ3RvbiBDPVVTMB4XDTI1MDIwNTA5MTUw
MFoXDTQ5MTIzMTIzNTk1OVowHjEcMBoGA1UEAwwTQVdTIElvVCBDZXJ0aWZpY2F0
ZTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALGH6iafCbKD1lqs++4O
2G4IrOw4XoF9ramSTZ/0FKfW9PbGtwG4APxJ1i6jZbHSnPc/Ob/dky6yMbZQvax9
z50ToMltH313CHOtgosJqe+9VXB0KMy301AX0gJ/+EUnvhcWmSzfffNcDZwNAPHJ
tvdFrUFq3TY2x7fdqxWUlMGFJgOaMJPS7fTLlwAfBORrw8i7dSa2WujFxQBJPGD3
Pwcn/+Pgw/xze8ueN8uZWLwMZkAV7K1EHtUY1ujR6FxKEOSwP2XN3KTAZOsCUyGk
GK/ReJvuSegxMO/Y6krxgwOOeRhGEnXGV3owM+bQbIcn7Qp77yHYMTG916ZNuiiK
31cCAwEAAaNgMF4wHwYDVR0jBBgwFoAUyJRJf5yzNk63bewiBmvJoCb/KZowHQYD
VR0OBBYEFH5gqhiuN97p+u0AdAYWb1Dx/j7wMAwGA1UdEwEB/wQCMAAwDgYDVR0P
AQH/BAQDAgeAMA0GCSqGSIb3DQEBCwUAA4IBAQCRul+6UM87lES+qHlI7VLs1hz+
8iTgXH1hBGZm9024aTpcHw8LD3DB680p8HQ9kuT4ZxdoYT8sjy/kuU9x/gy5LBN8
L0op1kuebbRgk93ftbHegjmK29UOP091Yc+VdRsP9tJ+/Cl17sBPSzr26WzG1ogU
y7GAc35zgglCO5ns692NaIpeRw+yt/OvdNh4va24Lxly31Gt0sliJYZnS6oYgwW0
cQdbGHWBx+L5aiOHDG7A4wMekb0PJeeey/zA4ruVh6ZvisxZqVYRcXWp2obSeSuK
JNtA8wsAcicT7U5Mgi35han+nunANALgAL3Y80Ln4n8RfVFhtxWrGQlYS+MR
-----END CERTIFICATE-----
)KEY";

// Device Private Key
static const char AWS_CERT_PRIVATE[] PROGMEM = R"KEY(
-----BEGIN RSA PRIVATE KEY-----
MIIEpAIBAAKCAQEAsYfqJp8JsoPWWqz77g7Ybgis7DhegX2tqZJNn/QUp9b09sa3
AbgA/EnWLqNlsdKc9z85v92TLrIxtlC9rH3PnROgyW0ffXcIc62Ciwmp771VcHQo
zLfTUBfSAn/4RSe+FxaZLN9981wNnA0A8cm290WtQWrdNjbHt92rFZSUwYUmA5ow
k9Lt9MuXAB8E5GvDyLt1JrZa6MXFAEk8YPc/Byf/4+DD/HN7y543y5lYvAxmQBXs
rUQe1RjW6NHoXEoQ5LA/Zc3cpMBk6wJTIaQYr9F4m+5J6DEw79jqSvGDA455GEYS
dcZXejAz5tBshyftCnvvIdgxMb3Xpk26KIrfVwIDAQABAoIBAE0Fa4ff/eQOIKRs
YkyQ8kMizmsZtZ62eO6Vw8m+qmt67gJWijVbsEnEewD28PrqJiF6s8JTDjT3KGwx
sWixmK5MQrjA+CWFzAvr3jQWOD0DxpqoOr8+jZY1D274OC1Apc78he4a9FjtuhXW
6m78Fb5H43f7Ngf8Uj+qEzyknrkqIxls1PLE9IHV87iFsp8FJ+lY0sBMdNGvLKNm
Zuq7unPvUsp790hSEJJRUl3L6v3TNYyd30Wg2q/U9eUq/FkEcIUuYYjqRH+Q/9Kp
JIsABeBSwRY2jidEEDJ737F8DvrHWm6FLQyeSPCW1/U55Lw0J0ApPsRjFZfye6RY
86YcGUkCgYEA23z9qPQTZAuGvC178TbnGgtAjJBBQPejK/9wxE/bYD7iAU0w+Fto
ePH7T9E/QuiR9jAAf683YR9l0zqgwrioHQ9JLs5meihTWh69bPBXvRWGStv5ToWm
j7e0UdTRbMM1EF3GBAfrvRv+lscUq1DWdpHgvNsO70asN38GSVeXfJsCgYEAzxAm
wlAvHj0f49Aqj+TyT02haDshvqcnBki66pCO71Mzih6W7fUSGROe4mdURVTeFiLe
1nls3rFfKDdKjPSqygh/wVtcR47FVlLIl+VSE4Q/Q2LFzwaTmiofqPPtGq6/qU27
IgzDzQFlOgLuonIoRGGSDKK7hKTQGdbDaV6iTfUCgYEAtRx4Ozfb4Evai+CES1Bg
dg8e3l4SWkd9L0sChBrZDJwW5bgKVoUmudYC56PkLZO3DYwifTnZ2pyL6zaPfN3e
asw4ORU7XkV0MgL3j7Lq0y21uIO3PmHuRNzzQCr5/GM/oBeg06atkUhOVaBEn/B+
ZyyMY4nm0u5gIRMB3vcWG00CgYA9km/0GCPqugJhm+UMJOho7IyykeLW7p2MINR0
K8hVIkiRKcd3uwhGrK7yZAeLFlF0A6p/3FujXNsO+mIQyDCBI0XaGXC3Vp0XrkY3
5NkjNJAbWaO4jBwYG66ObvpylMQpdBPRbDpNG70eIwETDR8sNldXqoxYRSochOBW
1O0ugQKBgQCchXBYQ2SqlNNRIHhJDLyrIppzup4o7sztkyhR2qskKlHeFimkiU1u
4NroECFqdjZ5BANn02DaEU0a1hiaOqWWQT0mTifUJDyWDvO2ho7LLnW61YRPw+ix
igriAHnKfpyzYCDI8tmYm9m8Rh2dBo45ps4bPhrjWHhdcNF1FqEy4Q==
-----END RSA PRIVATE KEY-----
)KEY";

void connectAWS();